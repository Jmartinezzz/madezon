import{j as e,d as o,e as p,J as N,q as I,U as V}from"./api.esm-BxIE5U-h.js";import{R as w,u as L,a as K}from"./ripple.esm-CQ_ZHeu1.js";import{a as E}from"./layoutcontext-BgWetEi8.js";import{C as B}from"./CSSTransition-Bbq78_CN.js";const D=()=>e.jsx("div",{className:"flex align-items-center justify-content-center pt-3 border-top-1 surface-border",children:e.jsx("span",{className:"font-medium ml-2",children:"Madezon"})}),P=o.createContext({}),H=({children:i})=>{const[s,a]=o.useState(""),u={activeMenu:s,setActiveMenu:a};return e.jsx(P.Provider,{value:u,children:i})},O=i=>{const s=route(route().current()),a="",{activeMenu:u,setActiveMenu:r}=o.useContext(P),t=i.item,c=i.parentKey?i.parentKey+"-"+i.index:String(i.index),d=t.to&&s===t.to,b=u===c||u.startsWith(c+"-"),v=l=>{t.to&&t.to===l&&r(c)},[M,k]=o.useState(!1),[C,S]=o.useState(!1);o.useEffect(()=>{v(s)},[s,a]);const g=l=>{if(t.disabled){l.preventDefault();return}t.command&&t.command({originalEvent:l,item:t}),t.items?r(b?i.parentKey:c):r(c)},n=t.items&&t.visible!==!1&&e.jsx(B,{timeout:{enter:1e3,exit:450},classNames:"layout-submenu",in:i.root?!0:b,children:e.jsx("ul",{children:t.items.map((l,m)=>e.jsx(O,{item:l,index:m,className:l.badgeClass,parentKey:c},l.label))})},t.label);return e.jsxs("li",{className:p({"layout-root-menuitem":i.root,"active-menuitem":b}),children:[i.root&&t.visible!==!1&&e.jsx("div",{className:"layout-menuitem-root-text",children:t.label}),(!t.to||t.items)&&!t.dialog&&!t.downloadButton&&t.visible!==!1?e.jsxs("a",{href:t.url,onClick:l=>g(l),className:p(t.class,"p-ripple"),target:t.target,tabIndex:0,children:[e.jsx("i",{className:p("layout-menuitem-icon",t.icon)}),e.jsx("span",{className:"layout-menuitem-text",children:t.label}),t.items&&e.jsx("i",{className:"pi pi-fw pi-angle-down layout-submenu-toggler"}),e.jsx(w,{})]}):null,t.to&&!t.items&&t.visible!==!1?e.jsxs(N,{href:t.to,replace:t.replaceUrl,target:t.target,onClick:l=>g(l),className:p(t.class,"p-ripple",{"active-route":d}),tabIndex:0,children:[e.jsx("i",{className:p("layout-menuitem-icon",t.icon)}),e.jsx("span",{className:"layout-menuitem-text",children:t.label}),t.items&&e.jsx("i",{className:"pi pi-fw pi-angle-down layout-submenu-toggler"}),e.jsx(w,{})]}):null,n]})},T=()=>{const i=[{label:"Home",items:[{label:"Dashboard",icon:"pi pi-fw pi-home",to:route("admin.dashboard")}]},{label:"Store",items:[{label:"Products",icon:"pi pi-fw pi-id-card",to:route("admin.products.index")}]}];return e.jsx(H,{children:e.jsxs("ul",{className:"layout-menu",children:[i.map((s,a)=>s!=null&&s.separator?e.jsx("li",{className:"menu-separator"},`separator-${a}`):e.jsx(O,{item:s,root:!0,index:a},s.label)),e.jsx("a",{href:"https://blocks.primereact.org",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:e.jsx("img",{className:"w-full mt-3",src:"/layout/images/banner-primeblocks/dark.png"})})]})})},U=()=>e.jsx(T,{}),F=o.forwardRef((i,s)=>{const{layoutState:a,onMenuToggle:u,showProfileSidebar:r}=o.useContext(E),t=o.useRef(null),c=o.useRef(null),d=o.useRef(null);return o.useImperativeHandle(s,()=>({menubutton:t.current,topbarmenu:c.current,topbarmenubutton:d.current})),e.jsxs("div",{className:"layout-topbar",children:[e.jsx(N,{href:"/",className:"layout-topbar-logo",children:e.jsx("img",{src:"logo.png",height:"55px",alt:"logo"})}),e.jsx("button",{ref:t,type:"button",className:"p-link layout-menu-button layout-topbar-button",onClick:u,children:e.jsx("i",{className:"pi pi-bars"})}),e.jsx("button",{ref:d,type:"button",className:"p-link layout-topbar-menu-button layout-topbar-button",onClick:r,children:e.jsx("i",{className:"pi pi-user"})}),e.jsxs("div",{ref:c,className:p("layout-topbar-menu",{"layout-topbar-menu-mobile-active":a.profileSidebarVisible}),children:[e.jsxs(N,{href:route("profile.edit"),className:"p-link layout-topbar-button",children:[e.jsx("i",{className:"pi pi-user"}),e.jsx("span",{children:"Perfil"})]}),e.jsxs(N,{href:route("logout"),method:"post",as:"button",className:"p-link layout-topbar-button",children:[e.jsx("i",{className:"pi pi-lock"}),e.jsx("span",{children:"Cerrar sesion"})]})]})]})}),W=({children:i})=>{I().props.auth.user;const{layoutConfig:s,layoutState:a,setLayoutState:u}=o.useContext(E),r=o.useRef(null),t=o.useRef(null),[c,d]=L({type:"click",listener:n=>{var m,f,x,y,j,h;!((m=t.current)!=null&&m.isSameNode(n.target)||(f=t.current)!=null&&f.contains(n.target)||(y=(x=r.current)==null?void 0:x.menubutton)!=null&&y.isSameNode(n.target)||(h=(j=r.current)==null?void 0:j.menubutton)!=null&&h.contains(n.target))&&M()}});o.useEffect(()=>{M(),k()},[]);const[b,v]=L({type:"click",listener:n=>{var m,f,x,y,j,h,A,R;!((f=(m=r.current)==null?void 0:m.topbarmenu)!=null&&f.isSameNode(n.target)||(y=(x=r.current)==null?void 0:x.topbarmenu)!=null&&y.contains(n.target)||(h=(j=r.current)==null?void 0:j.topbarmenubutton)!=null&&h.isSameNode(n.target)||(R=(A=r.current)==null?void 0:A.topbarmenubutton)!=null&&R.contains(n.target))&&k()}}),M=()=>{u(n=>({...n,overlayMenuActive:!1,staticMenuMobileActive:!1,menuHoverActive:!1})),d(),S()},k=()=>{u(n=>({...n,profileSidebarVisible:!1})),v()},C=()=>{document.body.classList?document.body.classList.add("blocked-scroll"):document.body.className+=" blocked-scroll"},S=()=>{document.body.classList?document.body.classList.remove("blocked-scroll"):document.body.className=document.body.className.replace(new RegExp("(^|\\b)"+"blocked-scroll".split(" ").join("|")+"(\\b|$)","gi")," ")};o.useEffect(()=>{(a.overlayMenuActive||a.staticMenuMobileActive)&&c(),a.staticMenuMobileActive&&C()},[a.overlayMenuActive,a.staticMenuMobileActive]),o.useEffect(()=>{a.profileSidebarVisible&&b()},[a.profileSidebarVisible]),K(()=>{d(),v()});const g=p("layout-wrapper",{"layout-overlay":s.menuMode==="overlay","layout-static":s.menuMode==="static","layout-static-inactive":a.staticMenuDesktopInactive&&s.menuMode==="static","layout-overlay-active":a.overlayMenuActive,"layout-mobile-active":a.staticMenuMobileActive,"p-input-filled":s.inputStyle==="filled","p-ripple-disabled":!s.ripple});return e.jsx(V.Fragment,{children:e.jsxs("div",{className:g,children:[e.jsx(F,{ref:r}),e.jsx("div",{ref:t,className:"layout-sidebar shadow-3",children:e.jsx(U,{})}),e.jsxs("div",{className:"layout-main-container",children:[e.jsx("div",{className:"layout-main",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-2 px-4 pt-4 pb-5",children:i})}),e.jsx(D,{})]}),e.jsx("div",{className:"layout-mask"})]})})};export{W as A};
